@model MyWebProfile.Models.ThemeSettings
@{
    ViewData["Title"] = "Cài đặt Giao diện";
    Layout = "_AdminLayout";
}

<div class="row">
    <div class="col-md-8">
        <div class="card">
            <div class="card-body">
                <h3 class="mb-4">Cài đặt Giao diện</h3>
                
                <form asp-action="UpdateThemeSettings" method="post">
                    <div class="row">
                        <div class="col-md-6">
                            <div class="form-group">
                                <label asp-for="PrimaryColor" class="form-label">Màu chính</label>
                                <div class="color-input-group">
                                    <input type="color" asp-for="PrimaryColor" class="color-picker" value="@Model.PrimaryColor">
                                    <input type="text" asp-for="PrimaryColor" class="form-control color-text" placeholder="#007bff">
                                </div>
                            </div>
                        </div>
                        
                        <div class="col-md-6">
                            <div class="form-group">
                                <label asp-for="SecondaryColor" class="form-label">Màu phụ</label>
                                <div class="color-input-group">
                                    <input type="color" asp-for="SecondaryColor" class="color-picker" value="@Model.SecondaryColor">
                                    <input type="text" asp-for="SecondaryColor" class="form-control color-text" placeholder="#6c757d">
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="row">
                        <div class="col-md-6">
                            <div class="form-group">
                                <label asp-for="BackgroundColor" class="form-label">Màu nền</label>
                                <div class="color-input-group">
                                    <input type="color" asp-for="BackgroundColor" class="color-picker" value="@Model.BackgroundColor">
                                    <input type="text" asp-for="BackgroundColor" class="form-control color-text" placeholder="#ffffff">
                                </div>
                            </div>
                        </div>
                        
                        <div class="col-md-6">
                            <div class="form-group">
                                <label asp-for="TextColor" class="form-label">Màu chữ</label>
                                <div class="color-input-group">
                                    <input type="color" asp-for="TextColor" class="color-picker" value="@Model.TextColor">
                                    <input type="text" asp-for="TextColor" class="form-control color-text" placeholder="#333333">
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="row">
                        <div class="col-md-6">
                            <div class="form-group">
                                <label asp-for="FontFamily" class="form-label">Font chữ</label>
                                <select asp-for="FontFamily" class="form-control">
                                    <option value="Arial, sans-serif">Arial</option>
                                    <option value="'Times New Roman', serif">Times New Roman</option>
                                    <option value="'Courier New', monospace">Courier New</option>
                                    <option value="Georgia, serif">Georgia</option>
                                    <option value="Verdana, sans-serif">Verdana</option>
                                    <option value="'Trebuchet MS', sans-serif">Trebuchet MS</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="col-md-6">
                            <div class="form-group">
                                <label asp-for="FontSize" class="form-label">Cỡ chữ (px)</label>
                                <input type="number" asp-for="FontSize" class="form-control" min="12" max="24" value="@Model.FontSize">
                            </div>
                        </div>
                    </div>
                    
                    <div class="form-actions">
                        <button type="submit" class="btn btn-primary">
                            <i class="fas fa-save"></i> Lưu cài đặt
                        </button>
                        <button type="button" class="btn btn-secondary" onclick="resetToDefault()">
                            <i class="fas fa-undo"></i> Khôi phục mặc định
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>
    
    <div class="col-md-4">
        <div class="card">
            <div class="card-body">
                <h4 class="mb-3">Xem trước</h4>
                <div id="themePreview" class="preview-container">
                    <div class="preview-header">
                        <h3>Tiêu đề mẫu</h3>
                        <p>Đây là đoạn văn bản mẫu để xem trước cách hiển thị với các cài đặt giao diện hiện tại.</p>
                    </div>
                    
                    <div class="preview-buttons">
                        <button class="btn btn-primary">Nút chính</button>
                        <button class="btn btn-secondary">Nút phụ</button>
                    </div>
                    
                    <div class="preview-card-sample">
                        <h5>Thẻ mẫu</h5>
                        <p>Nội dung thẻ mẫu để xem trước giao diện.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const primaryColor = document.getElementById('PrimaryColor');
    const secondaryColor = document.getElementById('SecondaryColor');
    const backgroundColor = document.getElementById('BackgroundColor');
    const textColor = document.getElementById('TextColor');
    const fontFamily = document.getElementById('FontFamily');
    const fontSize = document.getElementById('FontSize');

    const themePreview = document.getElementById('themePreview');

    function updatePreview() {
        const primary = primaryColor.value;
        const secondary = secondaryColor.value;
        const background = backgroundColor.value;
        const text = textColor.value;
        const font = fontFamily.value;
        const size = fontSize.value;

        // Update preview styles
        themePreview.style.backgroundColor = background;
        themePreview.style.color = text;
        themePreview.style.fontFamily = font;
        themePreview.style.fontSize = size + 'px';

        // Update button colors
        const buttons = themePreview.querySelectorAll('.btn-primary');
        buttons.forEach(btn => {
            btn.style.backgroundColor = primary;
            btn.style.borderColor = primary;
        });

        const secondaryButtons = themePreview.querySelectorAll('.btn-secondary');
        secondaryButtons.forEach(btn => {
            btn.style.backgroundColor = secondary;
            btn.style.borderColor = secondary;
        });

        // Update text colors
        const headings = themePreview.querySelectorAll('h3, h5');
        headings.forEach(heading => {
            heading.style.color = text;
        });
    }

    // Add event listeners
    primaryColor.addEventListener('input', updatePreview);
    secondaryColor.addEventListener('input', updatePreview);
    backgroundColor.addEventListener('input', updatePreview);
    textColor.addEventListener('input', updatePreview);
    fontFamily.addEventListener('change', updatePreview);
    fontSize.addEventListener('input', updatePreview);

    // Initial preview
    updatePreview();
});

function resetToDefault() {
    document.getElementById('PrimaryColor').value = '#007bff';
    document.getElementById('SecondaryColor').value = '#6c757d';
    document.getElementById('BackgroundColor').value = '#ffffff';
    document.getElementById('TextColor').value = '#333333';
    document.getElementById('FontFamily').value = 'Arial, sans-serif';
    document.getElementById('FontSize').value = '16';
    
    // Trigger preview update
    document.getElementById('PrimaryColor').dispatchEvent(new Event('input'));
}
</script> 