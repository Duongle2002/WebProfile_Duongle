@model MyWebProfile.Models.Skill
@{
    ViewData["Title"] = "Thêm Kỹ năng mới";
    Layout = "_AdminLayout";
}

<div class="row">
    <div class="col-md-8">
        <div class="card">
            <div class="card-body">
                <h3 class="mb-4">Thêm Kỹ năng mới</h3>
                
                <form asp-action="CreateSkill" method="post">
                    <div class="row">
                        <div class="col-md-6">
                            <div class="form-group">
                                <label asp-for="Name" class="form-label">Tên kỹ năng</label>
                                <input asp-for="Name" class="form-control" placeholder="Nhập tên kỹ năng">
                                <span asp-validation-for="Name" class="text-danger"></span>
                            </div>
                        </div>
                        
                        <div class="col-md-6">
                            <div class="form-group">
                                <label asp-for="Category" class="form-label">Loại kỹ năng</label>
                                <select asp-for="Category" class="form-control">
                                    <option value="">Chọn loại kỹ năng</option>
                                    <option value="Programming">Lập trình</option>
                                    <option value="Design">Thiết kế</option>
                                    <option value="Database">Cơ sở dữ liệu</option>
                                    <option value="Framework">Framework</option>
                                    <option value="Tool">Công cụ</option>
                                    <option value="Language">Ngôn ngữ</option>
                                    <option value="Other">Khác</option>
                                </select>
                                <span asp-validation-for="Category" class="text-danger"></span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label asp-for="Description" class="form-label">Mô tả</label>
                        <textarea asp-for="Description" class="form-control" rows="3" placeholder="Mô tả chi tiết về kỹ năng"></textarea>
                        <span asp-validation-for="Description" class="text-danger"></span>
                    </div>
                    
                    <div class="row">
                        <div class="col-md-6">
                            <div class="form-group">
                                <label asp-for="Proficiency" class="form-label">Mức độ thành thạo</label>
                                <div class="d-flex align-items-center gap-3">
                                    <input type="range" id="proficiencyRange" class="form-control-range" min="0" max="100" value="50">
                                    <span id="proficiencyValue" class="fw-bold">50%</span>
                                </div>
                                <input type="hidden" asp-for="Proficiency" id="Proficiency" value="50">
                                <span asp-validation-for="Proficiency" class="text-danger"></span>
                            </div>
                        </div>
                        
                        <div class="col-md-6">
                            <div class="form-group">
                                <label asp-for="Icon" class="form-label">Icon</label>
                                <input asp-for="Icon" class="form-control" placeholder="fas fa-code" value="fas fa-code">
                                <small class="form-text">Sử dụng Font Awesome icons (ví dụ: fas fa-code, fas fa-database)</small>
                                <span asp-validation-for="Icon" class="text-danger"></span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="form-actions">
                        <button type="submit" class="btn btn-primary">
                            <i class="fas fa-save"></i> Lưu kỹ năng
                        </button>
                        <a href="@Url.Action("Skills", "Admin")" class="btn btn-secondary">
                            <i class="fas fa-arrow-left"></i> Quay lại
                        </a>
                    </div>
                </form>
            </div>
        </div>
    </div>
    
    <div class="col-md-4">
        <div class="card">
            <div class="card-body">
                <h4 class="mb-3">Xem trước</h4>
                <div class="skill-preview">
                    <div class="skill-content">
                        <div class="d-flex align-items-center mb-2">
                            <i id="previewIcon" class="fas fa-code me-2"></i>
                            <h5 id="previewName" class="mb-0">Tên kỹ năng</h5>
                        </div>
                        <div class="skill-meta mb-2">
                            <span class="category" id="previewCategory">Loại kỹ năng</span>
                        </div>
                        <p id="previewDescription" class="skill-description">Mô tả kỹ năng sẽ hiển thị ở đây</p>
                        <div class="skill-progress">
                            <div class="progress">
                                <div id="previewProgress" class="progress-bar" style="width: 50%"></div>
                            </div>
                            <span id="previewProficiency" class="proficiency-text">50%</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const nameInput = document.getElementById('Name');
    const categoryInput = document.getElementById('Category');
    const descriptionInput = document.getElementById('Description');
    const proficiencyRange = document.getElementById('proficiencyRange');
    const iconInput = document.getElementById('Icon');

    const previewName = document.getElementById('previewName');
    const previewCategory = document.getElementById('previewCategory');
    const previewDescription = document.getElementById('previewDescription');
    const previewProgress = document.getElementById('previewProgress');
    const previewProficiency = document.getElementById('previewProficiency');
    const previewIcon = document.getElementById('previewIcon');

    function updatePreview() {
        // Update name
        previewName.textContent = nameInput.value || 'Tên kỹ năng';
        
        // Update category
        previewCategory.textContent = categoryInput.value || 'Loại kỹ năng';
        
        // Update description
        previewDescription.textContent = descriptionInput.value || 'Mô tả kỹ năng sẽ hiển thị ở đây';
        
        // Update proficiency
        const proficiency = parseInt(proficiencyRange.value) || 50;
        previewProgress.style.width = proficiency + '%';
        previewProficiency.textContent = proficiency + '%';
        
        // Update icon
        if (iconInput.value) {
            previewIcon.className = iconInput.value;
        } else {
            previewIcon.className = 'fas fa-code';
        }
    }

    // Add event listeners
    nameInput.addEventListener('input', updatePreview);
    categoryInput.addEventListener('change', updatePreview);
    descriptionInput.addEventListener('input', updatePreview);
    proficiencyRange.addEventListener('input', updatePreview);
    iconInput.addEventListener('input', updatePreview);

    // Update proficiency value display
    proficiencyRange.addEventListener('input', function() {
        document.getElementById('proficiencyValue').textContent = this.value + '%';
        document.getElementById('Proficiency').value = this.value;
    });

    // Initial preview
    updatePreview();
});
</script> 