@model IEnumerable<MyWebProfile.Models.ContentSettings>

@{
    ViewData["Title"] = "Cài đặt Hero";
    Layout = "_AdminLayout";
}

<div class="d-flex justify-content-between align-items-center mb-4">
    <div>
        <h2>Cài đặt Hero Section</h2>
        <p>Quản lý nội dung hiển thị trong phần Hero của website</p>
    </div>
    <div>
        <a href="@Url.Action("ContentSettings", "Admin")" class="btn btn-outline-secondary">
            <i class="fas fa-arrow-left"></i> Quay lại
        </a>
    </div>
</div>

<div class="card">
    <div class="card-body">
                    <div class="row">
                        <div class="col-md-6">
                            <h5>Thông tin cá nhân</h5>
                            <div class="mb-3">
                                <label class="form-label">Tên hiển thị</label>
                                <input type="text" class="form-control" id="heroName" 
                                       value="@(Model.FirstOrDefault(x => x.Key == "HeroName")?.Value ?? "Lê Hữu Dương")" />
                            </div>
                            <div class="mb-3">
                                <label class="form-label">Vị trí</label>
                                <input type="text" class="form-control" id="heroLocation" 
                                       value="@(Model.FirstOrDefault(x => x.Key == "HeroLocation")?.Value ?? "San Francisco, CA")" />
                            </div>
                            <div class="mb-3">
                                <label class="form-label">Chức danh</label>
                                <input type="text" class="form-control" id="heroTitle" 
                                       value="@(Model.FirstOrDefault(x => x.Key == "HeroTitle")?.Value ?? "Full Stack Developer & UI/UX Designer")" />
                            </div>
                            <div class="mb-3">
                                <label class="form-label">Ảnh đại diện (URL)</label>
                                <input type="text" class="form-control" id="heroImage" 
                                       value="@(Model.FirstOrDefault(x => x.Key == "HeroImage")?.Value ?? "https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?ixlib=rb-4.0.3&auto=format&fit=crop&w=200&h=200")" />
                            </div>
                        </div>
                        <div class="col-md-6">
                            <h5>Thống kê</h5>
                            <div class="mb-3">
                                <label class="form-label">Số dự án</label>
                                <input type="number" class="form-control" id="heroProjects" 
                                       value="@(Model.FirstOrDefault(x => x.Key == "HeroProjects")?.Value ?? ViewBag.ProjectCount.ToString())" />
                                <small class="text-muted">Hiện tại có @ViewBag.ProjectCount dự án trong database</small>
                            </div>
                            <div class="mb-3">
                                <label class="form-label">Số năm kinh nghiệm</label>
                                <input type="text" class="form-control" id="heroExperience" 
                                       value="@(Model.FirstOrDefault(x => x.Key == "HeroExperience")?.Value ?? "5+")" />
                            </div>
                            <div class="mb-3">
                                <label class="form-label">Số khách hàng</label>
                                <input type="text" class="form-control" id="heroClients" 
                                       value="@(Model.FirstOrDefault(x => x.Key == "HeroClients")?.Value ?? "50+")" />
                            </div>
                        </div>
                    </div>
                    
                    <div class="row mt-4">
                        <div class="col-12">
                            <h5>Nút hành động</h5>
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="mb-3">
                                        <label class="form-label">Nút Portfolio</label>
                                        <input type="text" class="form-control" id="heroPortfolioButton" 
                                               value="@(Model.FirstOrDefault(x => x.Key == "HeroPortfolioButton")?.Value ?? "Xem Portfolio")" />
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="mb-3">
                                        <label class="form-label">Nút Liên hệ</label>
                                        <input type="text" class="form-control" id="heroContactButton" 
                                               value="@(Model.FirstOrDefault(x => x.Key == "HeroContactButton")?.Value ?? "Liên hệ ngay")" />
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="row mt-4">
                        <div class="col-12">
                            <button type="button" class="btn btn-primary" onclick="saveHeroSettings()">
                                <i class="bi bi-save"></i> Lưu cài đặt
                            </button>
                            <a href="@Url.Action("ContentSettings")" class="btn btn-secondary">
                                <i class="bi bi-arrow-left"></i> Quay lại
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    <script>
        function saveHeroSettings() {
            const settings = {
                'HeroName': $('#heroName').val(),
                'HeroLocation': $('#heroLocation').val(),
                'HeroTitle': $('#heroTitle').val(),
                'HeroImage': $('#heroImage').val(),
                'HeroProjects': $('#heroProjects').val(),
                'HeroExperience': $('#heroExperience').val(),
                'HeroClients': $('#heroClients').val(),
                'HeroPortfolioButton': $('#heroPortfolioButton').val(),
                'HeroContactButton': $('#heroContactButton').val()
            };

            let savedCount = 0;
            const totalSettings = Object.keys(settings).length;

            Object.keys(settings).forEach(function(key) {
                $.post('@Url.Action("UpdateHeroSetting")', { key: key, value: settings[key] })
                    .done(function() {
                        savedCount++;
                        if (savedCount === totalSettings) {
                            alert('Đã lưu cài đặt thành công!');
                        }
                    })
                    .fail(function() {
                        alert('Có lỗi xảy ra khi lưu cài đặt!');
                    });
            });
        }
    </script>
} 